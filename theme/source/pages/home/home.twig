{% extends "layouts/layout.twig" %}

{% block content %}
	{% embed "modules/section/section.twig" with { title: globals.project.title, content: globals.project.lead, modifiers: ['home-lead'] } %}
		{% block title %}
			<h1 class="mod_section__title">{{ title }}</h1>
		{% endblock %}
		{% block content %}
			{% if globals.gulp %}
				{{ content }}
			{% else %}
				{{ content|wpautop }}
			{% endif %}
			{% if image_panorama %}
				{% include "modules/panorama/panorama.twig" with { image: image_panorama, alt: title } %}
			{% endif %}
		{% endblock %}
	{% endembed %}
	{% if post_current %}
		{% embed "modules/section/section.twig" with { title: 'Aktuell', post: post_current, modifiers: ['current'] } %}
			{% block content %}
				{% include "modules/event/event.twig" with { event: post,  modifiers: ['current'] } %}
			{% endblock %}
		{% endembed %}
	{% endif %}
	{% if posts_archive %}
		{% embed "modules/section/section.twig" with { title: 'Archiv', posts: posts_archive, modifiers: ['archive'] } %}
			{% block content %}
				{% include "modules/eventlist/eventlist.twig" with { events: posts } %}
				{% include "modules/ctalink/ctalink.twig" with { link: link_archive, text: 'Zum Archiv' } %}
			{% endblock %}
		{% endembed %}
	{% endif %}
{% endblock %}

{% block linedata %}
		<script type="text/javascript">
			fibi = fibi || {}; fibi.data = fibi.data || {};
			fibi.data.lineOptions = {
				routes: [{
					id: 'main',
					mq: {
						from: 'large'
					},
					segments: [
						{
							element: 'body',
							offset: { x: -20, y: -100 },
						},{
							element: 'body',
							offset: { x: 60, y: 80 },
						},{
							element: '.mod_logo',
							offset: { x: -120, y: 200 },
						},{
							element: '.mod_section--home-lead .mod_panorama',
							offset: { x: 0, y: 200 },
						},{
							element: '.mod_section--current .mod_section__title',
							offset: { x: 0, y: 0 },
						},{
							element: '.mod_section--current .mod_section__title',
							offset: { x: 0, y: 0 },
						},{
							element: '.mod_section--current .mod_event__info',
							offset: { x: -60, y: 28 },
						},{
							element: '.mod_section--archive .mod_section__title',
							offset: { x: 0, y: 0 },
						},{
							element: '.mod_section--archive .mod_event:first-child .mod_event__info',
							offset: { x: -50, y: 28 },
						},{
							element: '.mod_section--archive .mod_event:nth-child(2) .mod_event__info',
							offset: { x: 50, y: 16, anchor: 'top-right' },
						},{
							element: '.mod_section--archive .mod_event:nth-child(3) .mod_event__info',
							offset: { x: -50, y: 0 },
						},{
							element: '.mod_section--archive .mod_event:nth-child(3) .mod_event__info',
							offset: { x: -200, y: 50 },
						},{
							element: '.mod_section--archive .mod_ctalink--archive .mod_ctalink__anchor',
							offset: { x: 100, y: 0, anchor: 'top-right' },
						},{
							element: 'body',
							offset: { x: -300, y: 100, anchor: 'bottom-right' },
						}
					]
				},{
					id: 'mainMobile',
					mq: {
						from: 'medium',
						to: 'large'
					},
					segments: [
						{
							element: 'body',
							offset: { x: -50, y: -50 },
						},{
							element: '.mod_logo',
							offset: { x: -20, y: 200 },
						},{
							element: '.mod_section--home-lead .mod_panorama__content',
							offset: { x: -160, y: 50 },
						},{
							element: '.mod_section--current .mod_section__title',
							offset: { x: -20, y: -80 },
						},{
							element: '.mod_section--current .mod_section__title',
							offset: { x: -120, y: 400 },
						}
					]
				},{
					id: 'mainMobileMedium',
					mq: {
						to: 'medium'
					},
					segments: [
						{
							element: 'body',
							offset: { x: -50, y: -50 },
						},{
							element: '.mod_logo',
							offset: { x: -40, y: 100 },
						},{
							element: '.mod_section--home-lead .mod_panorama__content',
							offset: { x: -40, y: 0 },
						},{
							element: '.mod_section--current .mod_section__title',
							offset: { x: 20, y: -40 },
						},{
							element: '.mod_section--current .mod_section__title',
							offset: { x: -120, y: 400 },
						}
					]
				},{
					id: 'mainMobileContinued',
					mq: {
						to: 'large'
					},
					segments: [
						{
							element: '.mod_section--current .mod_section__title',
							offset: { x: 120, y: -10, anchor: 'bottom-right' },
						},{
							element: '.mod_section--current .mod_event__info',
							offset: { x: -20, y: 0, anchor: 'top-right' },
						},{
							element: '.mod_section--current .mod_event__info',
							offset: { x: 120, y: 120, anchor: 'bottom-right' },
						},{
							element: '.mod_section--archive .mod_event:first-child',
							offset: { x: -50, y: 0, anchor: 'bottom-right' },
						},{
							element: '.mod_section--archive .mod_event:nth-child(2)',
							offset: { x: -200, y: 120 },
						},{
							element: '.mod_section--archive .mod_event:nth-child(3) .mod_event__info',
							offset: { x: -40, y: 0 },
						},{
							element: '.mod_section--archive .mod_event:nth-child(3) .mod_event__info',
							offset: { x: -160, y: 120 },
						},{

							element: 'body',
							offset: { x: -300, y: 100, anchor: 'bottom-right' },
						}
					]
				}]
			};
		</script>
	{% endblock %}
