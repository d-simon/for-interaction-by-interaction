{% extends "layouts/layout.twig" %}

{% block content %}
	{% embed "modules/section/section.twig" with { title: globals.project.title, content: globals.project.lead, modifiers: ['home-lead'] } %}
		{% block title %}
			<h1 class="mod_section__title">{{ title }}</h1>
		{% endblock %}
		{% block content %}
			<div class="mod_section__content--lead">
				{% if globals.gulp %}
					{{ content }}
				{% else %}
					{{ content|wpautop }}
				{% endif %}
			</div>
			{% if image_panorama %}
				{% include "modules/panorama/panorama.twig" with { image: image_panorama, alt: title } %}
			{% endif %}
		{% endblock %}
	{% endembed %}
	{% if posts_current %}
		{% embed "modules/section/section.twig" with { title: 'Aktuell', posts: posts_current, modifiers: ['current'] } %}
			{% block content %}
				{% include "modules/eventlist/eventlist.twig" with { events: posts,  modifiers: ['current'] } %}
				{% include "modules/ctalink/ctalink.twig" with { link: link_about, text: 'Was ist Fibi?' } %}
			{% endblock %}
		{% endembed %}
	{% endif %}
{% endblock %}

{% block linedata %}
	<script type="text/javascript">
		fibi = fibi || {}; fibi.data = fibi.data || {};
		fibi.data.lineOptions = {
			routes: [{
				id: 'main',
				mq: {
					from: 'large'
				},
				segments: [
					{
						element: 'body',
						offset: { x: -20, y: -100 },
					},{
						element: '.mod_section--home-lead .mod_section__content--lead',
						offset: { x: 200, y: 40, anchor: 'top-right' },
					},{
					// 	element: '.mod_section--home-lead .mod_panorama',
					// 	offset: { x: 0, y: 200 },
					// },{
						element: '.mod_section--current .mod_section__title',
						offset: { x: 0, y: 0 },
					},{
						element: '.mod_section--current .mod_event__info',
						offset: { x: -60, y: 28 },
					},
					{
						element: '.mod_ctalink--current',
						offset: { x: -150, y: 20, anchor: 'top-middle' },
					},
					{
						element: 'body',
						offset: { x: -300, y: 100, anchor: 'bottom-right' },
					}
				]
			},{
				id: 'mainMobile',
				mq: {
					from: 'medium',
					to: 'large'
				},
				segments: [
					{
						element: 'body',
						offset: { x: -50, y: -50 },
					},{
						element: '.mod_logo',
						offset: { x: -20, y: 200 },
					},{
						element: '.mod_section--home-lead .mod_panorama__content',
						offset: { x: -160, y: 50 },
					},{
						element: '.mod_section--current .mod_section__title',
						offset: { x: -20, y: -80 },
					},{
						element: '.mod_section--current .mod_section__title',
						offset: { x: -120, y: 400 },
					}
				]
			},{
				id: 'mainMobileMedium',
				mq: {
					to: 'medium'
				},
				stroke: {
					strokeWidth: 30
				},
				segments: [
					{
						element: 'body',
						offset: { x: -50, y: -50 },
					},{
						element: '.mod_logo',
						offset: { x: 0, y: 100 },
					},{
						element: '.mod_section--home-lead .mod_panorama__content',
						offset: { x: -40, y: 0 },
					},{
						element: '.mod_section--current .mod_section__title',
						offset: { x: 20, y: -40 },
					},{
						element: '.mod_section--current .mod_section__title',
						offset: { x: -120, y: 400 },
					}
				]
			},{
				id: 'mainMobileContinuedSmall',
				stroke: {
					strokeWidth: 30
				},
				mq: {
					to: 'medium'
				},
				segments: [
					{
						element: '.mod_section--current .mod_section__title',
						offset: { x: 120, y: -10, anchor: 'bottom-right' },
					},{
						element: '.mod_section--current .mod_event__info',
						offset: { x: -20, y: 0, anchor: 'top-right' },
					},{
						element: '.mod_section--current .mod_event__info',
						offset: { x: 120, y: 120, anchor: 'bottom-right' },
					},{
						element: '.mod_section--archive .mod_event:first-child',
						offset: { x: -50, y: 0, anchor: 'bottom-right' },
					},{
						element: '.mod_section--archive .mod_event:nth-child(2)',
						offset: { x: -200, y: 120 },
					},{
						element: '.mod_section--archive .mod_event:nth-child(3) .mod_event__info',
						offset: { x: 0, y: -60 },
					},{
						element: '.mod_section--archive .mod_event:nth-child(3) .mod_event__info',
						offset: { x: -160, y: 120 },
					},{
						element: 'body',
						offset: { x: -300, y: 100, anchor: 'bottom-right' },
					}
				]
			},{
				id: 'mainMobileContinued',
				mq: {
					from: 'medium',
					to: 'large'
				},
				segments: [
					{
						element: '.mod_section--current .mod_section__title',
						offset: { x: 120, y: -10, anchor: 'bottom-right' },
					},{
						element: '.mod_section--current .mod_event__info',
						offset: { x: -20, y: 0, anchor: 'top-right' },
					},{
						element: '.mod_section--current .mod_event__info',
						offset: { x: 120, y: 120, anchor: 'bottom-right' },
					},{
						element: '.mod_section--archive .mod_event:first-child',
						offset: { x: -50, y: 0, anchor: 'bottom-right' },
					},{
						element: '.mod_section--archive .mod_event:nth-child(2)',
						offset: { x: -200, y: 120 },
					},{
						element: '.mod_section--archive .mod_event:nth-child(3) .mod_event__info',
						offset: { x: -40, y: 0 },
					},{
						element: '.mod_section--archive .mod_event:nth-child(3) .mod_event__info',
						offset: { x: -160, y: 120 },
					},{
						element: 'body',
						offset: { x: -300, y: 100, anchor: 'bottom-right' },
					}
				]
			}]
		};
	</script>
	{% endblock %}
